<!DOCTYPE html>
<html>
  <head>
    <title>Chat</title>
  </head>
  <body>
    <div id="chat-container">
      <div id="chat-messages"></div>
      <input type="text" id="message-input" placeholder="Type your message" />
      <button id="send-button">Send</button>
    </div>

    <script>
      const apiKey = "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";
      async function sendMessage(message) {
        const response = await fetch(
          "https://api.openai.com/v1/chat/completions", //Api endpoint url
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${apiKey}`, //This header is used for authentication and authorizing access to the ChatGPT API.
            },
            body: JSON.stringify({
              model: "gpt-3.5-turbo",  // or any other model you prefer
              messages: [
                { role: "system", content: "You are" }, //This is the initial system message to set the context for the conversation
                { role: "user", content: message },
              ],
            }),
          }
        );

        const data = await response.json();
        return data.choices[0].message.content;
      }

      document.addEventListener("DOMContentLoaded", function () {
        const messageInput = document.getElementById("message-input");
        const sendButton = document.getElementById("send-button");
        const chatMessages = document.getElementById("chat-messages");

        sendButton.addEventListener("click", async function () {
          const message = messageInput.value;
          if (message.trim() !== "") {
            displayMessage("You", message);
            messageInput.value = "";

            // Call the sendMessage function and display the response
            const response = await sendMessage(message);
            displayMessage("DSK-JF", response);
          }
        });

        function displayMessage(sender, message) {
          const newMessage = document.createElement("div");
          newMessage.innerHTML = `<strong>${sender}:</strong> ${message}`;
          chatMessages.appendChild(newMessage);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }
      });
    </script>
  </body>
</html>
